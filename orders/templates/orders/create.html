{% extends "base.html" %}

{% block title %}Checkout{% endblock %}

{% block style_css %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
{% endblock %}

{% block content %}
    <h1>Checkout</h1>
    <div class="order-info">
        <h3>Your order</h3>
        <ul>
            {% for item in cart %}
                <li>
                    {{ item.quantity }}x {{ item.product.name }}
                    <span>${{ item.total_price }}</span>
                </li>
            {% endfor %}
            {% if cart.coupon %}
                <li>
                    "{{ cart.coupon.code }}" ({{ cart.coupon.discount }}% off)
                    <span>- ${{ cart.get_discount|floatformat:"2" }}</span>
                </li>
            {% endif %}
        </ul>
        <p>Total: ${{ cart.get_total_price_after_discount|floatformat:"2" }}</p>
    </div>

    <form action="." method="post" class="form-horizontal order-form">{% csrf_token %}
        <input type="hidden" name="user" value="{{ user.pk }}">

        <div class="form-group">
            <label for="id_first_name">First name:</label>
            <input class="form-control" type="text" name="first_name" value="{{ user.first_name }}" maxlength="50"
                   required id="id_first_name" style="width: 250px">
        </div>

        <div class="form-group">
            <label for="id_last_name">Last name:</label>
            <input class="form-control" type="text" name="last_name" value="{{ user.last_name }}" maxlength="50"
                   required id="id_last_name" style="width: 250px">
        </div>

        <div class="form-group">
            <label for="id_email">Email:</label>
            <input class="form-control" type="email" name="email" value="{{ user.email }}" maxlength="254" required
                   id="id_email" style="width: 250px">
        </div>

        <div class="form-group">
            <label for="id_address">Address:</label>
            <input class="form-control" type="text" name="address" maxlength="250" required id="id_address"
                   style="width: 250px">
        </div>

        <div class="form-group">
            <label for="id_postal_code">Postal code:</label>
            <input class="form-control" type="text" name="postal_code" maxlength="20" required id="id_postal_code"
                   style="width: 250px">
        </div>

        <div class="form-group">
            <label for="id_city">City:</label>
            <input class="form-control" type="text" name="city" maxlength="100" required id="id_city"
                   style="width: 250px">
        </div>

        {#        {{ form.as_p }}#}
        <p><input type="submit" value="Place order"></p>

    </form>
{% endblock %}